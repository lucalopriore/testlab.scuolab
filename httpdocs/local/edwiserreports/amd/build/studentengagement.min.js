"use strict";define(["jquery","./common","./defaultconfig","./select2"],function(e,t,n){var a={PAGE:"#studentengagement",TABLE:"#studentengagement table",COURSE:"#studentengagement .course-select",FORMFILTER:'#studentengagement .download-links [name="filter"]',COHORT:"#studentengagement #cohortfilter",COHORTITEM:"#studentengagement #cohortfilter + div .dropdown-item"},o=null,i=0,s={GET_DATA:function(t){return e.ajax({url:n.requestUrl,type:n.requestType,dataType:n.requestDataType,data:{action:"get_studentengagement_table_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:t})}})}};function l(){o=e(a.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollY:"400px",scrollX:!0,scrollCollapse:!0,autoWidth:!0,ordering:!1,columns:[{data:"student"},{data:"timespentonlms"},{data:"timespentoncourse"},{data:"assignmentsubmitted"},{data:"activitiescompleted"},{data:"visitsoncourse"}],dom:'<"edw-studentengagement-top"<"edw-listing"l><"edw-list-filtering"f>>t<"edw-bottom"<"edw-list-pagination"p>>i',language:{sSearch:M.util.get_string("searchuser","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports")},rowCallback:function(n,a){e("td:eq(1)",n).html(0==a.timespentonlms?"-":t.timeFormatter(a.timespentonlms)),e("td:eq(2)",n).html(0==a.timespentoncourse?"-":t.timeFormatter(a.timespentoncourse))},ajax:function(n,o,l){t.loader.show(a.PAGE),s.GET_DATA({cohort:i,course:e(a.COURSE).val(),search:n.search.value,start:n.start,length:n.length}).done(function(e){t.loader.hide(a.PAGE),o(e)}).fail(function(e){t.loader.hide(a.PAGE)})}})}return{init:function(){e(document).ready(function(){e(a.PAGE).find(".singleselect").select2(),e(a.COURSE).on("change",function(){e(a.FORMFILTER).val([i,e(a.COURSE).val()].join("-")),null!==o?o.ajax.reload():l()}),e(a.COHORTITEM).on("click",function(){e(a.COHORT).text(e(this).text()),i=e(this).data("cohortid"),e(a.FORMFILTER).val([i,e(a.COURSE).val()].join("-")),null!==o?o.ajax.reload():l()}),l()})}}});
//# sourceMappingURL=studentengagement.min.js.map
