"use strict";define(["jquery","./common","./defaultconfig","./select2"],function(e,t,a){var r={PAGE:"#grade",TABLE:"#grade table",COURSE:"#grade .course-select",FORMFILTER:'#grade .download-links [name="filter"]',COHORT:"#grade #cohortfilter",COHORTITEM:"#grade #cohortfilter + div .dropdown-item"},o=null,l=0,i={GET_DATA:function(t){return e.ajax({url:a.requestUrl,type:a.requestType,dataType:a.requestDataType,data:{action:"get_grade_table_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({filter:t})}})}};function n(){o=e(r.TABLE).DataTable({paging:!0,processing:!0,serverSide:!0,rowId:"DT_RowId",deferRendering:!0,scrollY:"400px",scrollX:!0,scrollCollapse:!0,autoWidth:!0,columns:[{data:"student"},{data:"course"},{data:"activity",sortable:!1},{data:"grade"}],dom:'<"edw-grade-top"<"edw-listing"l><"edw-list-filtering"f>>t<"edw-bottom"<"edw-list-pagination"p>>i',language:{sSearch:M.util.get_string("searchuser","local_edwiserreports"),emptyTable:M.util.get_string("emptytable","local_edwiserreports")},ajax:function(a,o,n){t.loader.show(r.PAGE),e(r.FORMFILTER).val([e(r.COURSE).val(),l,a.search.value,a.order[0].column,a.order[0].dir].join("-")),i.GET_DATA({cohort:l,course:e(r.COURSE).val(),search:a.search.value,start:a.start,length:a.length,ordering:a.order[0]}).done(function(e){t.loader.hide(r.PAGE),o(e)}).fail(function(e){t.loader.hide(r.PAGE)})}})}return{init:function(){e(document).ready(function(){e(r.PAGE).find(".singleselect").select2(),e(r.COURSE).on("change",function(){null!==o?o.ajax.reload():n()}),e(r.COHORTITEM).on("click",function(){e(r.COHORT).text(e(this).text()),l=e(this).data("cohortid"),null!==o?o.ajax.reload():n()}),n()})}}});
//# sourceMappingURL=grade.min.js.map
